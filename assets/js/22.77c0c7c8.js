(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{472:function(t,s,a){"use strict";a.r(s);var e=a(7),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"들어가며"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#들어가며"}},[t._v("#")]),t._v(" 들어가며")]),t._v(" "),a("p",[a("RouterLink",{attrs:{to:"/_posts/2020-9-22-mqtt-eclipse-mosquitto.html"}},[t._v("MQTT Broker 설치")]),t._v("가 완료 되었다면, 메시지 발행 클라이언트인 "),a("code",[t._v("mosquitto_pub")]),t._v("의 사용법에 대해 자세히 알아보자.")],1),t._v(" "),a("h2",{attrs:{id:"사전설치"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#사전설치"}},[t._v("#")]),t._v(" 사전설치")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# mosquitto 클라이언트 설치")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" mosquitto-clients\n")])])]),a("h2",{attrs:{id:"mosquitto-pub-란"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mosquitto-pub-란"}},[t._v("#")]),t._v(" mosquitto_pub 란?")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://mosquitto.org/man/mosquitto_pub-1.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("mosquitto_pub"),a("OutboundLink")],1),t._v(" 는 토픽에 대한 단일 메시지를 발행하고 종료하는 간단한 MQTT 클라이언트입니다.")]),t._v(" "),a("h2",{attrs:{id:"mosquitto-pub-옵션"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mosquitto-pub-옵션"}},[t._v("#")]),t._v(" mosquitto_pub 옵션")]),t._v(" "),a("p",[t._v("mosquitto_pub에서 자주 사용하는 옵션에 대해 살펴보자.")]),t._v(" "),a("h3",{attrs:{id:"h-host"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#h-host"}},[t._v("#")]),t._v(" -h, --host")]),t._v(" "),a("ul",[a("li",[t._v("연결할 호스트를 지정하십시오. 기본값은 "),a("code",[t._v("localhost")]),t._v("입니다.")])]),t._v(" "),a("h3",{attrs:{id:"p-port"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#p-port"}},[t._v("#")]),t._v(" -p, --port")]),t._v(" "),a("ul",[a("li",[t._v("지정된 포트에 연결하십시오. 지정되지 않은 경우 일반 "),a("code",[t._v("MQTT는 1883")]),t._v("이 기본값이며, "),a("code",[t._v("TLS를 통한 MQTT의 경우 8883")]),t._v("이 사용됩니다.")])]),t._v(" "),a("h3",{attrs:{id:"t-topic"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#t-topic"}},[t._v("#")]),t._v(" -t, --topic")]),t._v(" "),a("ul",[a("li",[t._v("메시지를 게시 할 MQTT 주제입니다.")])]),t._v(" "),a("h3",{attrs:{id:"m-message"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#m-message"}},[t._v("#")]),t._v(" -m, --message")]),t._v(" "),a("ul",[a("li",[t._v("명령줄에서 단일 메시지를 보냅니다.")])]),t._v(" "),a("h3",{attrs:{id:"u-username"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#u-username"}},[t._v("#")]),t._v(" -u, --username")]),t._v(" "),a("ul",[a("li",[t._v("브로커 인증에 사용할 사용자 이름을 제공하세요. "),a("code",[t._v("--pw")]),t._v("인수도 참고하세요")])]),t._v(" "),a("h3",{attrs:{id:"p-pw"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#p-pw"}},[t._v("#")]),t._v(" -P, --pw")]),t._v(" "),a("ul",[a("li",[t._v("브로커 인증에 사용할 비밀번호를 제공하십시오. 사용자 이름을 지정하지 않고이 인수를 사용하는 것은 MQTT v3.1 또는 v3.1.1을 사용할 때 유효하지 않습니다. "),a("code",[t._v("--username")]),t._v("옵션 도 참조하십시오 .")])]),t._v(" "),a("h3",{attrs:{id:"q-qos"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#q-qos"}},[t._v("#")]),t._v(" -q, --qos")]),t._v(" "),a("ul",[a("li",[t._v("메시지에 사용할 서비스 품질 (0, 1, 2)을 지정합니다. 기본값은 "),a("code",[t._v("0")]),t._v("입니다.")])]),t._v(" "),a("h3",{attrs:{id:"d-debug"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#d-debug"}},[t._v("#")]),t._v(" -d, --debug")]),t._v(" "),a("ul",[a("li",[t._v("디버그 메시지를 활성화합니다.")])]),t._v(" "),a("h3",{attrs:{id:"f-file"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#f-file"}},[t._v("#")]),t._v(" -f, --file")]),t._v(" "),a("ul",[a("li",[t._v("파일의 내용을 메시지로 보냅니다.")])]),t._v(" "),a("h2",{attrs:{id:"예시"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#예시"}},[t._v("#")]),t._v(" 예시")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("QoS 1을 사용하여 온도 정보를 localhost에 게시합니다.")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("mosquitto_pub -t sensors/temperature -m "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),t._v(" -q "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("비표준 포트 및 QoS 0의 원격 호스트에 타임 스탬프 및 온도 정보를 게시합니다.")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("mosquitto_pub -h "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".1.1 -p "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1885")]),t._v(" -t sensors/temperature -m "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1266193804 32"')]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("전등 스위치 상태를 게시합니다. 전등 스위치 이벤트 사이에 오랜 시간이있을 수 있으므로 메시지가 유지되도록 설정됩니다.")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("mosquitto_pub -r -t switches/kitchen_lights/status -m "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"on"')]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("다음 두 가지 방법으로 파일 내용을 보냅니다.")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("mosquitto_pub -t my/topic -f ./data\nmosquitto_pub -t my/topic -s "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" ./data\n")])])])]),t._v(" "),a("li",[a("p",[t._v("현재 비용 측정기에서 파싱 된 전기 사용량 데이터를 전송하여 표준 입력에서 한 줄로 읽거나 하나의 메시지로 읽습니다.")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("read_cc128.pl "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" mosquitto_pub -t sensors/cc128 -l\n")])])])])])])}),[],!1,null,null,null);s.default=r.exports}}]);