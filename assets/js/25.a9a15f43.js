(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{474:function(t,s,a){"use strict";a.r(s);var e=a(7),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"들어가며"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#들어가며"}},[t._v("#")]),t._v(" 들어가며")]),t._v(" "),a("p",[a("RouterLink",{attrs:{to:"/_posts/2020-9-22-mqtt-eclipse-mosquitto.html"}},[t._v("MQTT Broker 설치")]),t._v("가 완료 되었다면, 메시지 구독 클라이언트인 "),a("code",[t._v("mosquitto_sub")]),t._v("의 사용법에 대해 자세히 알아보자.")],1),t._v(" "),a("h2",{attrs:{id:"사전설치"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#사전설치"}},[t._v("#")]),t._v(" 사전설치")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# mosquitto 클라이언트 설치")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" mosquitto-clients\n")])])]),a("h2",{attrs:{id:"mosquitto-sub-란"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mosquitto-sub-란"}},[t._v("#")]),t._v(" mosquitto_sub 란?")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://mosquitto.org/man/mosquitto_sub-1.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("mosquitto_sub"),a("OutboundLink")],1),t._v("는 토픽을 구독하고 수신하여 메시지를 인쇄하는 MQTT 클라이언트입니다."),a("br"),t._v("\n토픽을 구독하는 것 외에도 mosquitto_sub는 수신 된 메시지를 필터링하여 인쇄되지 않도록 하며 ( -T옵션 참조 ) 또는 토픽 구독 취소를 ( -U옵션 참조) 할 수 있습니다. 토픽 구독 취소는 clean session 을 false로 설정하여 연결하는 클라이언트에 유용합니다.")]),t._v(" "),a("h2",{attrs:{id:"mosquitto-sub-옵션"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mosquitto-sub-옵션"}},[t._v("#")]),t._v(" mosquitto_sub 옵션")]),t._v(" "),a("p",[t._v("mosquitto_sub에서 자주 사용하는 옵션에 대해 살펴보자.")]),t._v(" "),a("h3",{attrs:{id:"h-host"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#h-host"}},[t._v("#")]),t._v(" -h, --host")]),t._v(" "),a("ul",[a("li",[t._v("연결할 호스트를 지정하십시오. 기본값은 "),a("code",[t._v("localhost")]),t._v("입니다.")])]),t._v(" "),a("h3",{attrs:{id:"p-port"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#p-port"}},[t._v("#")]),t._v(" -p, --port")]),t._v(" "),a("ul",[a("li",[t._v("지정된 포트에 연결하십시오. 지정되지 않은 경우 일반 "),a("code",[t._v("MQTT는 1883")]),t._v("이 기본값이며, "),a("code",[t._v("TLS를 통한 MQTT의 경우 8883")]),t._v("이 사용됩니다.")])]),t._v(" "),a("h3",{attrs:{id:"t-topic"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#t-topic"}},[t._v("#")]),t._v(" -t, --topic")]),t._v(" "),a("ul",[a("li",[t._v("구독 할 MQTT 주제입니다. 이 옵션을 반복하여 여러 주제를 구독 할 수 있습니다.")])]),t._v(" "),a("h3",{attrs:{id:"u-username"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#u-username"}},[t._v("#")]),t._v(" -u, --username")]),t._v(" "),a("ul",[a("li",[t._v("브로커 인증에 사용할 사용자 이름을 제공하세요. "),a("code",[t._v("--pw")]),t._v("인수도 참고하세요")])]),t._v(" "),a("h3",{attrs:{id:"p-pw"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#p-pw"}},[t._v("#")]),t._v(" -P, --pw")]),t._v(" "),a("ul",[a("li",[t._v("브로커 인증에 사용할 비밀번호를 제공하십시오. 사용자 이름을 지정하지 않고이 인수를 사용하는 것은 MQTT v3.1 또는 v3.1.1을 사용할 때 유효하지 않습니다. "),a("code",[t._v("--username")]),t._v("옵션 도 참조하십시오 .")])]),t._v(" "),a("h3",{attrs:{id:"q-qos"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#q-qos"}},[t._v("#")]),t._v(" -q, --qos")]),t._v(" "),a("ul",[a("li",[t._v("수신 메시지에 대해 원하는 서비스 품질 (0, 1 및 2 ) 을 지정 하십시오. 기본값은 0 입니다.\nQoS는 mosquitto_sub의 단일 인스턴스에서 구독하는 모든 주제에 대해 동일합니다.")])]),t._v(" "),a("h3",{attrs:{id:"d-debug"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#d-debug"}},[t._v("#")]),t._v(" -d, --debug")]),t._v(" "),a("ul",[a("li",[t._v("디버그 메시지를 활성화합니다.")])]),t._v(" "),a("h3",{attrs:{id:"f"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#f"}},[t._v("#")]),t._v(" -F")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://mosquitto.org/man/mosquitto_sub-1.html#outputformat",target:"_blank",rel:"noopener noreferrer"}},[t._v("출력 인쇄 형식"),a("OutboundLink")],1),t._v("을 지정합니다. 이 옵션을 사용하면 각 메시지에서 화면에 인쇄되는 정보를 선택할 수 있습니다.")])]),t._v(" "),a("h2",{attrs:{id:"예시"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#예시"}},[t._v("#")]),t._v(" 예시")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("QoS 1을 사용하여 localhost의 온도 정보를 구독하십시오.")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("mosquitto_sub -t sensors/temperature -q "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("여러 컴퓨터 / 하드 드라이브에서 하드 드라이브 온도 업데이트를 구독하십시오. 이는 각 컴퓨터가 센서 / 컴퓨터 / HOSTNAME / 온도 / HD_NAME에 하드 드라이브 온도를 게시 할 것으로 예상합니다.")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("mosquitto_sub -t sensors/machines/+/temperature/+\n")])])])]),t._v(" "),a("li",[a("p",[t._v("모든 브로커 상태 메시지를 구독합니다.")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("mosquitto_sub -v -t "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$SYS")]),t._v("/"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v('출력 형식을 "ISO-8601 날짜 : 주제 : 16 진수 페이로드"로 지정합니다.')]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("mosquitto_sub -F "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@Y-@m-@dT@H:@M:@S@z : %t : %x'")]),t._v(" -t "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#'")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v('출력 형식을 "epoch.nanoseconds 이후 초 : 보유 플래그 : qos : mid : 페이로드 길이"로 지정하십시오.')]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("mosquitto_sub -F "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'%@s.@N : %r : %q : %m : %l'")]),t._v(" -q "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" -t "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#'")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("토픽 및 페이로드 출력 (지원되는 경우 색상 포함)")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("mosquitto_sub -F "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\e"}},[t._v("\\e")]),t._v("[92m%t "),a("span",{pre:!0,attrs:{class:"token entity",title:"\\e"}},[t._v("\\e")]),t._v("[96m%p"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\e"}},[t._v("\\e")]),t._v("[0m'")]),t._v(" -q "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" -t "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#'")]),t._v("\n")])])])])])])}),[],!1,null,null,null);s.default=r.exports}}]);